# MySQL 数据库 - 核心知识

## 零、主要内容

- MySQL介绍和安装
- MySQL连接和GUI
- SQL语句和数据类型
- SQL语句-DDL语句
- SQL语句-DML语句
- SQL语句-SQL语句

## 一、MySQL介绍和安装

### 1. 为什么需要数据库

![Alt text](image-55.png)

### 2. 常见的数据库有那些

![Alt text](image-56.png)

### 3. 认识MySQL

- 课程主要是开发自己的后端项目，以关系型数据MySQL作为主要内容
- MySQL的介绍
  - MySQL是一个关系型数据库，其本质上就是一款软件，一个系统

## 二、MySQL连接和GUI

### 1. MySQL的连接操作

![Alt text](image-57.png)

### 2. 终端连接数据库

![Alt text](image-58.png)

### 3. 终端操作数据 - 显示数据库

![Alt text](image-59.png)

### 4. 终端操作数据 - 创建数据库-表

![Alt text](image-60.png)

### 5. GUI工具介绍

![Alt text](image-61.png)

## 三、认识SQL语句

- 希望操作数据库，就需要有和数据库沟通的语言，这个语言就是SQL语句
  - SQL是

![Alt text](image-62.png)

### 1. SQL语句的分类

- 常见的SQL语句可以分成四类：
  - DDL（Data Definition Language）：数据定义语言
    - 可以通过DDL语句对数据或者表进行：创建、删除、修改等操作
  - DML（Data Manipulation Language）：数据操作语言
    - 可以同构DML语句对表中的数据进行：添加、删除、修改等操作
  - DQL（Data Query Language）：数据查询语言
    - 可以通过DQL语句对数据进行查询**（重点）**
  - DCL（Data Control Language）：数据控制语言
    - 可以通过DCL语句对数据库、表格的权限进行相关访问控制操作

### 2. 数据库的操作（一）

![Alt text](image-63.png)

### 3. 数据库的操作（二）

![Alt text](image-64.png)

### 4. 数据表的操作

- 查看数据表

```sql
 # 查看所有的数据表
  SHOW TABLES;

 # 查看某一个表结构
  DESC 表名;
```

- 创建数据表

```sql
CREATE TABLE IF NOT EXISTS `users`(
  name varchar(20),
  age int,
  height float,
);
```

### 5. SQL的数据类型 - 数字类型

- MySQL支持的数据类型有：数字类型、日期和时间类型、字符串（字符和字节）类型，空间类型和JSON数据类型
- 数字类型
  - 整数类型
    - TINYINT：1个字节，范围-128~127
    - SMALLINT：2个字节，范围-32768~32767
    - MEDIUMINT：3个字节，范围-8388608~8388607
    - INT：4个字节，范围-2147483648~2147483647
    - BIGINT：8个字节，范围 -2^63 ~ 2^63-1
  - 浮点数类型
    - FLOAT(M,D)： 单精度浮点数，4个字节，M是总个数，D是小数点后面的个数
    - DOUBLE(M,D)：双精度浮点数，8个字节，M是总个数，D是小数点后面的个数
  - 精确数字类型：
    - DECIMAL(M,D)：高精度浮点数，M是总个数，D是小数点后面的个数
    - NUMERIC(M,D)：DECIMAL是NUMERIC的实现形式

- 日期类型
  - YEAR：年份类型，格式：YYYY，范围：1901~2155
  - DATE：日期类型，格式：YYYY-MM-DD，范围：1000-01-01 ~ 9999-12-31
  - DATETIME：日期和时间类型，格式：YYYY-MM-DD HH:MM:SS，范围：1000-01-01 00:00:00 ~ 9999-12-31 23:59:59
  - TIMESTAMP：时间戳类型，格式：YYYY-MM-DD HH:MM:SS，范围：1970-01-01 00:00:00 ~ 2038-01-19 03:14:07
  - TIME：时间类型，格式：HH:MM:SS

- 字符串类型
  - CHAR类型：在创建表时为固定长度，长度可以是0-255之间的任何值；在被查询时，会删除后面的空格
  - VARCHAR类型：在创建表时为可变长度，长度可以是0-65535之间的任何值；在被查询时，会保留后面的空格
  - BINARY和VARBINARY类型：用于存储二进制字符串类型，存储的是字符节字符串
  - BLOB类型：用于存储大的二进制类型
  - TEXT类型：用于存储大的字符串类型

### 6. 表约束

- 主键：PRIMARY KEY
  - 一张表中，为了区分每一条记录的唯一性，必须有一个字段是永远不会重复的，并且不会为空的，这个字段通常将他设置为主键
    - 主键是表中唯一的索引
    - 并且必须是NOT NULL的，如果没有设置NOT NULL，那么MySQL也会隐式的设置为NOT NULL
    - 主键也可以是多列索引，PRIMARY KEY（key_part,...），称之为联合主键
    - 建议：开发中主键字段应该是和业务无关的，尽量不要使用业务字段来作为主键

- 唯一键：UNIQUE KEY
  - 某些字段在开发中希望是唯一的，不会重复的，比如手机号码、身份证号码等，这个字段可以使用UNIQUE来约束
  - 使用UNIQUE约束的字段在表中必须是不同的
  - UNIQUE索引运行NULL包含的列具有多个值NULL

- 不能为空：NOT NULL
  - 某些字段要求用户必须插入值，不可以为空，可以使用NOT NULL约束

- 默认值：DEFAULT
  - 某些字段希望在没有设置值时给予一个默认值，这个时候可以使用DEFAULT来完成

- 自动递增：AUTO_INCREMENT
  - 某些字段希望不设置值时可以自动递增，这个时候可以使用AUTO_INCREMENT来完成
  - AUTO_INCREMENT的值必须是整数类型，通常是INT类型
  - AUTO_INCREMENT的值默认是从1开始的，每次递增1
  - AUTO_INCREMENT的值在表中是唯一的
  - AUTO_INCREMENT的值在表中是不可修改的
  - AUTO_INCREMENT的值在表中是不会重复的

- 外键约束 - 讲到多表关系时，在进行讲解

## 四、SQL语句-DDL语句

### 1. 数据库操作

```sql
-- 对数据库进行操作
-- 1. 查看当前所有的数据库
SHOW  DATABASES;

-- 2. 使用某个数据库
USE music_db;

-- 3. 查看目前哪一个数据库选中（正在使用的数据库）
SELECT DATABASE();

-- 4. 创建一个新的数据库
CREATE DATABASE IF NOT EXISTS test_demo;

-- 5. 删除某一个数据库
DROP DATABASE IF EXISTS  test_demo;

-- 6. 修改数据库（了解， 自己演练）
```

### 2. 数据表操作

```sql
-- 1. 查看当前数据库中有哪些表
SHOW TABLES;

-- 2. 查看某一张表的表结构
DESC t_singer;

-- 3. 创建一张新表
-- 3.1 创建基本表结构
CREATE TABLE IF NOT EXISTS `users`(
  name VARCHAR(10),
  age INT,
  height DOUBLE
);

DROP TABLE IF EXISTS `users`

-- 3.2 创建完整表结构
CREATE TABLE IF NOT EXISTS `users`(
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(20) UNIQUE NOT NULL,
  level INT DEFAULT(0),
  telephone VARCHAR(20) UNIQUE
);

-- 4. 修改表结构
-- 4.1 修改表名字
ALTER TABLE `users` RENAME TO `t_users`;
-- 4.2 添加新的字段（field）
ALTER TABLE `t_users` ADD `createTime` TIMESTAMP;
-- 4.3 修改字段的名称（field名称）
ALTER TABLE `t_users` CHANGE createTime createAt DATETIME;
-- 4.4 删除某一个字段（field）
ALTER TABLE `t_users` DROP createTime;
-- 4.5 修改某一个字段类型（id int -> bigint）
ALTER TABLE `t_users` MODIFY `id` BIGINT;
```

## 五、SQL语句-DML语句

### 1. 删除操作 - 更新操作

![Alt text](image-65.png)

## 六、SQL语句-DQL语句

- DQL：Data Query Language，数据查询语言
  - SELECT用于从一个或者多个表中检索选中的行（Record）

- 查询的格式如下

```sql
SELECT select expr [,select expr]...
  [FROM table_references]
  [WHERE where_condition]
  [ORDER BY expr [ASC | DESC]]
  [LIMIT {[offset,]row_count | row_count OFFSET offset}]
  [GROUP BY expr]
  [HAVING having_condition]
  
```

### 1. 准备数据

- 准备一张表

```sql
CREATE TABLE IF NOT EXISTS `products`(
  id INT PRIMARY KEY AUTO_INCREMENT,
  brand VARCHAR(20) ,
  title VARCHAR(100) NOT NULL,
  price DOUBLE NOT NULL,
  score DECIMAL(2,1),
  voteCnt INT,
  url VARCHAR(100),
  pid INT,
);
```

### 2. 基本查询

- 查询所有的字段

![Alt text](image-66.png)

### 3. while查询条件（一）

![Alt text](image-67.png)

### 4. while查询条件（二）

- WHERE的逻辑运算符

![Alt text](image-68.png)

### 4. 模糊查询条件

- WHERE的逻辑运算符
