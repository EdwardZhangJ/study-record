# React 基础 - JSX语法

## 认识JSX语法

```js
const element = <h2>{message}</h2>
const root = ReactDOM.createRoot(document.querySelector('#root'))
root.render(element)
```

- element 变量的声明右侧赋值的标签语法是什么呢
  - 不是一段字符串
  - 看起来是一段HTML元素，但是能在js中直接给一个变量赋值html吗？
  - 如果将 type="text/babel" 属性去掉，会出现语法报错，不能直接赋值
  - 它是一段JSX语法，是一种js和html混合的语法

- JSX是什么
  - JSX是一种JavaScript的语法扩展，在很多地方称之为JavaScript XML，看起来是一段XML语法
  - 用于描述UI界面，并且可以和JavaScript融合在一起使用
  - 不同于Vue中的模块语法，不需要专门模块语法中的一些指令（比如v-for、v-if、v-else、v-bind）

### 为什么React选择了JSX

- React认为渲染逻辑本质上与其他UI逻辑存在内在耦合
  - 比如UI需要绑定事件
  - 比如UI中需要展示数据状态
  - 比如在某些状态发生改变时，又需要改变UI

- 他们之间是密不可分，所以React没有将标记分离到不同的文件中，而是将它们组合到了一起，称之为组件（Component）

### JSX的书写规范

- JSX的顶层只能有一个根元素，所以会在外层包裹一个div元素
- 为了方便阅读，通常在jsx的外层包裹一个()，并且jsx可以进行换行书写
- jsx中的标签可以是单标签，也可以是双标签，但是单标签必须以 /> 结尾

## JSX的基本使用

### JSX的注释

```jsx
render() {
  const { message } = this.state
  return (
    <div>
      {/* JSX的注释写法 */}
      <h2>{message}</h2>
    </div>
  )
}
```

### JSX嵌入变量

- JSX插入变量作为子元素
  - 情况一：当变量是Number、String、Array时，可以直接显示
  - 情况二：当变量是null、undefined、Boolean类型是，内容是空
    - 如果希望可以显示null、undefined、Boolean，可以将其转成字符串
    - toString方法、与空字符串拼接、String(变量)等方式
  - 情况三：Object变量不能作为子元素
- JSX嵌入表达式
  - 运算表达式
  - 三元运算符
  - 执行一个函数

```html
<script type="text/babel">
  class App extends React.Component {
    constructor() {
      super()
      this.state = {
        counter: 100,
        message: 'Hello World',
        namesList: ['abc', 'cba', 'nba'],
        aaa: undefined,
        bbb: null,
        ccc: true,
        friend: {
          name: 'kobe',
        },
        firstName: 'kobe',
        lastName: 'bryant',
        age: 20,
        moviesList: ['流浪地球', '星际穿越', '盗梦空间', '大话西游' ],
      } 
      this.getMovieEls = this.getMovieEls.bind(this)
    }
    getMovieEls () {
      return this.state.moviesList.map((movie, index) => {
        return <li key={index}>{movie}</li>
      })
    }
    render() {
      const { counter, message, namesList } = this.state
      const { aaa, bbb, ccc } = this.state
      const { friend } = this.state
      const { firstName, lastName } = this.state
      const { age } = this.state
      const liEls = this.state.moviesList.map((movie, index) => {
        return <li key={index}>{movie}</li>
      })
      return (
        <div>
          {/* 1. Number/String/Array 直接显示 */}
          <h2>{counter}</h2>
          <h2>{message}</h2>
          <h2>{namesList}</h2>
          {/* 2. undefined/null/Boolean */}
          <h2>{aaa + ''}</h2>
          <h2>{bbb + ''}</h2>
          <h2>{ccc + ''}</h2>
          {/* 3. Object类型不能作为子元素展示 */}
          <h2>{friend.name}</h2> {/** Objects are not valid as a React child */}
          {/* 4. 可以插入表达式 */}
          <h2>{10 + 20}</h2>
          <h2>{firstName + " " + lastName}</h2>
          {/* 5. 可以插入三元运算符 */}
          <h2>{age >= 18 ? '成年人' : '未成年'}</h2>
          {/* 6. 可以插入函数调用 */}
          <h2>电影列表</h2>
          <ul>{liEls}</ul>
          <ul>{this.getMovieEls()}</ul>
        </div>
      )
    }
  }
  // 2. 创建root根并且渲染App组件
  const root = ReactDOM.createRoot(document.querySelector('#root'))
  root.render(<App />)
</script>
```

### jsx绑定属性

- jsx绑定属性
  - 比如元素都会有title属性
  - 比如img元素会有src属性
  - 比如a元素会有href属性
  - 比如元素可能需要绑定class
  - 比如原生使用内联样式style

```html
<script type="text/babel">
  class App extends React.Component {
    constructor() {
      super()
      this.state = {
        message: 'Hello World',
        imgUrl: 'https://tse2-mm.cn.bing.net/th/id/OIP-C.7S9azHGsc_NP6RzdyhImHwHaLH?pid=ImgDet&rs=1',
        href: 'https://www.baidu.com/',
        isActive: true,
      }
    }
    render() {
      const { message, imgUrl, href, isActive } = this.state
      // 需求 isActive: true -> active
      // 1. class绑定写法一：字符串拼接
      const className = `abc cba ${isActive ? 'active' : ''}`
      // 2. class绑定写法二：将所有的class放到数组中
      const classList = ['abc', 'cba']
      if (isActive) classList.push('active')
      // 3. class绑定写法三：classnames库
      const styleObj = {
        color: 'red',
        fontSize: '30px',
      }
      return (
        <div>
          {/* 1. 基本绑定*/}
          <h2 title={message}>{message}</h2>
          <img src={imgUrl} alt="" />
          <a href={href}>百度</a>
          {/* 2. 绑定class属性*/}
          <h2 className={className}>Hello World</h2>
          <h2 className={classList.join(" ")}>Hello World</h2>
          {/* 3. 绑定style属性  */}
          <h2 style={{ color: 'red', fontSize: '30px', }}>呵呵呵</h2>
          <h2 style={styleObj}>呵呵呵</h2>
        </div>
      )
    }
  }

  // 2. 创建root根并且渲染App组件
  const root = ReactDOM.createRoot(document.querySelector('#root'))
  root.render(<App />)
</script>
```

## JSX的事件绑定

## JSX的条件渲染

## JSX的列表渲染

## JSX的原理和本质
